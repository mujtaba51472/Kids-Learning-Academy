$(function(){var n={q:"",type:"",price:"",style:"",license:"",is_explicit:"",is_featured:"",sort:"relevance"},o=[];$("#search-filters").on("change","input, select",function(){var e=$(this),t=e.parents("form").attr("action"),a=$("#search-filters").serializeObject(),i={name:e.attr("name"),value:e.val()};$.each(o,function(e,t){t.abort()}),$.each(a,function(e,t){Cookies.remove(e),a[e]==n[e]&&delete a[e]}),$(window).scrollTop(0),$("#search-results .icon-grid").html(templates.render("icons/_loading.html",{count:48})),o.push($.get(t,a,function(e){$("#search-results").replaceWith(e),$("title").text($("#search-title").text()),$(document).trigger("search.results"),$(window).trigger("scroll"),$('#search-results [data-toggle="tooltip"]').tooltip(),o.pop()})),analytics("send","event","Settings","Filter "+i.name,i.value),$('.search-form [type="hidden"]').remove(),$.each(a,function(e,t){"q"!=e&&$("<input />",{type:"hidden",name:e,value:t}).appendTo(".search-form")}),history.pushState(a,null,"?"+$.param(a))}),$(window).on("popstate",function(){location.reload()}),$('[data-toggle="reset-filters"]').on("click",function(){$.each(n,function(e){Cookies.remove(e)})}),$(document).on("click","[data-filter]",function(){var e=$(this).data();$("#search-filters").find('[name="'+e.filter+'"][value="'+e.value+'"]').click(),$('[data-toggle="tooltip"]').tooltip("hide")}),$(document).on("click",'[data-filter="license"]',function(e){var t=$(this),a=t.data(),i=t.find('[data-title="license"]').text(),n=t.parents(".dropdown"),o=a.value;$('#search-filters [name="license"]').val(o).trigger("change"),n.find('.btn[data-toggle="dropdown"]').toggleClass("active",0<o.length),n.find('[data-toggle="dropdown"] [data-title="license"]').text(i),t.siblings().removeClass("active"),t.addClass("active"),e.preventDefault()}),$(document).on("click",'[data-filter="sort"]',function(e){var t=$(this),a=t.data(),i=$.trim(t.text()),n=t.parents(".dropdown");$('#search-filters [name="sort"]').val(a.value).trigger("change"),n.find('.btn[data-toggle="dropdown"]').toggleClass("active",0<a.value),n.find('[data-toggle="dropdown"] [data-title="sorting"]').text(function(){return 16<i.length&&(i=i.substring(0,13)+"..."),i}),t.siblings().removeClass("active"),t.addClass("active"),e.preventDefault()}),$(document).on("click",'[data-trigger="more-premium"]',function(){var e=$(this),t=$(".premium-teaser"),a=$(".premium-teaser .icon-preview");t.addClass("expanded"),e.siblings('[data-filter="price"]').removeClass("d-none"),e.remove(),a.show();var i=Math.floor(t.width()/a.width()),n=Math.floor(a.length/i)*i;a.eq(n-1).nextAll(".icon-preview").hide()}),$(document).on("click",".icon-preview a",function(){var e=$(this),t=e.parents(".icon-preview"),a=($("#search-results .icon-preview"),t.index(".icon-preview")+1);analytics("send","event","Search results",{"add-cart":"Add icon to cart",download:"Download icon","icon-details":"Open icon details",flag:"Open flag icon modal",bookmark:"Open bookmark icon modal"}[e.data("action")]||"Not set","Position in results",a)}),$("[data-setting]").on("change",function(e){$('#search-filters [name="q"]').trigger("change")}),$("[data-preview_size]").on("click",function(e){var t=$(this),a=t.data("preview_size");t.siblings(".active").removeClass("active"),t.addClass("active"),Cookies.set("preview_size",a),$("#search-results").length?$('#search-filters [name="q"]').trigger("change"):location.reload()}),$(".btn-group-styles").on("change",function(e){var t=$(e.target).val(),a=$('.dropdown-styles [data-toggle="dropdown"]'),i=$('.dropdown-styles [data-filter="style"][data-value="'+t+'"]'),n=0<i.length;$(".dropdown-styles .dropdown-item").removeClass("active"),a.toggleClass("pre-active active",n),i.toggleClass("active",n)})});
//# sourceMappingURL=https://www.iconfinder.com/static/js/search.js.map
